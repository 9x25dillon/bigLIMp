version: "3.9"
services:
  nats:
    image: nats:2
    command: ["-js"]
    ports: ["4222:4222", "8222:8222"]

  choppy:
    build: ../services/choppy-gateway
    environment:
      - PORT=8001
    ports: ["8001:8000"]

  limps:
    build: ../services/limps-orchestrator
    environment:
      - PORT=8002
    ports: ["8002:8000"]

  matrix:
    build: ../services/matrixprocessor
    environment:
      - PORT=8003
    ports: ["8003:8000"]

  timecrystals:
    build: ../services/time-crystals
    volumes:
      - timecrystals:/data
    environment:
      - PORT=8004
    ports: ["8004:8000"]

  emotion:
    build: ../services/emotion-layer
    environment:
      - PORT=8005
    ports: ["8005:8000"]

  exo:
    build: ../services/exo-lattice
    environment:
      - NATS_URL=nats://nats:4222
    ports: ["8080:8080"]

volumes:
  timecrystals:
